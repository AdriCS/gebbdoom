\section{Watcom}

\begin{wrapfigure}[9]{r}{0.25\textwidth}
\centering
\includegraphics[width=.25\textwidth]{drawings/watcom.pdf}
\end{wrapfigure}


The DOS extender was magical but it was hard to setup in a standalone product. A bootstrap which would locate \cw{DOS4GW.EXE}, the program to run and setup both required multiple steps and close to 100 lines of C code\footnote{Source: Watcom C/C++ Programmer's Guide, "7.1.1 The Stub Program"}. The ramp up time was significant and raised the entry barrier. What was really needed was an integrated environment where the compiler and the linker would take care of bundling the extender and the application together into one executable. The solution would once again come from the North.\\ 
\par

Watcom compiler project was started in 1979 at the University of Waterloo in Ontario, Canada. Initially only supporting BASIC, it was improved over the years by students with support for new OS and languages. In 1988, three PHDs, Fred Crigger, Ian McPhee, and Jack Schueler made it the first C compiler running on IBM-PC.\\
\par
Sensing commercial potential, they incorporated Watcom International Corporation and picked a lightning for their logo to advertise their focus on performances. Five years later, in 1993, Watcom C had considerably improved. The latest version (9.0), retailing for "only" \$639\footnote{Inflation adjusted, USD\$639 in 2018. Nowadays compiler are "free".},  was deemed the best available on MS-DOS\footnote{Editor's choice -- PC Magazine, April 1995.}. \\
\par
Not only were they talented programmers, they also excelled at marketing their products. In early 90s, a reader could not open a computer magazine without finding a full page advertising Watcom's compiler. All ads ostensibly underlined the presence of a Dos Extender which freed programmer of the hated 16-bit mode and "Unleashed 32-bit power".
\par
\label{watcomad}
\fullimage{watcom_ad.png}



\vspace{-4mm}
Not only they were in the press, they also made sure they were known on BBS.\\
\par
\fq{WATCOM C/C++ will produce code which is at *least* twice as fast as your current 16 bit compiler, and more typically around five times as fast.}{rec.games.programmer}\\
\par
\trivia{One of the many marketing tricks in Watcom's sleeves was to never have released a Watcom v1.0 or even a Watcom v2.0. They started directly at "version 6". This was at least one version ahead of their competitors (Borland and Microsoft). A higher number unconsciously carried a notion of "more advanced than its competitor". Version one was also likely to features many bugs whereas the sixth installment was likely to have been battle hardened.}\\


\subsubsection{Popularity}
id Software were not the only team to value Watcom solution. Many other studios entrusted it with their code and as a result many emblematic software of the 90s were built with Watcom technology.\\
\begin{enumerate}
\item id Softare 
       \begin{enumerate}
       \item Doom (1993)
       \item Doom II (1994)
       \end{enumerate} 
\item Blizzard Entertainment 
       \begin{enumerate}
       \item Warcraft (1994)
       \item Warcraft II (1995)
       \end{enumerate}
\item Ken Silverman's BUILD Engine based games
      \begin{enumerate}
       \item Duke Nukem 3D (1996)
       \item Shadow Warrior (1997)
       \item Blood (1997)
       \end{enumerate}
\item LucasArts Entertainment Company
      \begin{enumerate}
       \item Full Throttle (1995)
       \item The Dig (1995)
       \item Dark Forces  (1995)
       \item Rebel Assault II  (1995)    
      \end{enumerate}
\end{enumerate}
\par


\subsection{ANSI C}
Not only the watcom/extender combo made programming simpler, it also made programs run faster. There was an other aspect, slightly less obvious yet of paramount impact on \doom.\\
\par
To bring C to DOS Real Mode and accommodate for segments manipulation, the language had been "augmented". A example from Wolfenstein 3D Memory Manager summarize well what "C for DOS" looked liked.\\
\par
\ccode{real_mode_c.c}
\par
Notice the wart keywords such as \cw{near}, \cw{far}, macros like \cw{FP\_OFF} and \cw{FP\_SEG}, and the \cw{DOS.H} library functions such as \cw{mallocnear}, \cw{coreleft}, and \cw{farcoreleft}. Neither "C for DOS" nor the I/O functions were portable.\\
\par
 It was impossible to take an UNIX program and compile it directly on DOS. Using Watcom compiler, C could be written using ANSI standard which opened the door to authoring programs on different machines running a different operating system. One company in particular would end up catching id Software attention. Its name was \NeXT.
