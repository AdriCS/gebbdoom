\section{History}

\begin{wrapfigure}[8]{r}{0.20\textwidth}
\centering
\includegraphics[width=.20\textwidth]{drawings/NeXT_logo.pdf}
\end{wrapfigure}
\par
NeXT's history starts (and amusingly, also ends) at Apple. In May of 1985, the Macintosh mediocre sales drew a bleak future for the company. Steve Jobs, co-founder and then General Manager of the Mac department, wanted to lower the price and increase marketing in order to boost the Mac. John Sculley then CEO, wanted to abandon the Mac and refocus the company resources on the Apple II, the only profitable product Apple had marketed until then.\\
\par
 A vote was called and the board of directors sided with Sculley. Steve Jobs found himself stripped of all responsibilities. A few months later, on September 13, 1985, he resigned and went on to work on his next project.\\
\par
NeXT, Inc was incorporated in February 1986 with \$7 million of Jobs's own money. Many member of the Mac division left Apple to join the newly formed company, among them  Joanna Hoffman, Bud Tribble (head of software division), George Crow, Rich Page, Susan Barnes, Susan Kare, and Dan'l  Lewin.\\ 
\par
With NeXT, Jobs went back to a project he had contemplated while still at Apple in August 1985. While touring universities to boost Mac sales, he had met Paul Berg, a Nobel Laureate in chemistry. Paul was frustrated with the cost\footnote{\$100,000.} of teaching students about recombinant DNA in wet laboratories. It seemed there was a market for 3M\footnote{One Megabyte of RAM, a Megapixel display and MegaFLOP performance.} workstation targeted at universities and students\footnote{The Second Coming of Steve Jobs.}. NeXT set itself to build something powerful yet cheap enough so college students could afford it.\\
\par
\fq{I want some kid at Stanford to be able to cure cancer in his dorm room.}{Steve Jobs, 1987}\\
\par
Steve Jobs spared no expenses. For \$100,000, Paul Rand was commissioned with a logo. An automated factory featuring "Surface Mount"\footnote{The Machine to Build The Machines.} capable of producing 10,000 units per month was built in Fremont, CA. The design firm Frogdesign which had proven itself with the Apple IIc was hired as well. The goal was to ship by the end of 19XX.\\
\par
The machine was to be perfect, following Alan Kay precept to create both the hardware and the software to run it.\\
\par
\fq{People who are really serious about software should make their own hardware.}{Alan Kay, 1980}\\
\par

Using their experience from Apple and particularly their work on the Macintosh, the company defined the three pillars of the NeXT Computer: GUI, Networking and Object-Oriented programming.\\
\par
\fq{I went to Xerox PARC. And they were very kind. They showed me what they are working on. And they showed me really three things. But I was so blinded by the first one that I didn't even really see the other two. One of the things they showed me was object oriented programming -- they showed me that but I didn't even see that. The other one they showed me was a networked computer system... they had over a hundred Alto computers all networked using email etc., etc., I didn't even see that. I was so blinded by the first thing they showed me, which was the graphical user interface. I thought it was the best thing I'd ever seen in my life. }{Steve Jobs, 1995}\\

\par
\section{The NeXT Computer}
The first machine shipped in 1989 after three years of hard work. Not meeting the initial release target was not a problem according to Jobs who famously replied to a journalist inquiring about the delay: "Late? This computer is five years ahead of its time!".\\
\par
Based on a Motorola 68030 25 Mhz and featuring powerful co-processors such a DSP and a FPU, the hardware delivered high performances. The machine also happened to be gorgeous. In an era where all computers case were made of plastic and beige, the elegance of the one foot perfect cube made of painted magnesium stood out.\\
\par
\cfullimage{NEXT_Cube}{The Next Computer}


The monitor was a piece of art itself. The 17" MegaDisplay allowed a high\footnote{At the time, a 14" monitor delivering a resolution of 640x480 was high-end standard on PC.} resolution of 1120 x 832 pixels with a density of 92 DPI (just shy of a true Megapixel at 931,840 total pixels). At launch the supply chain was so tight that when ordering a NeXTComputer, the customer received two parcels. One from Fremont containing the Central Unit, the keyboard and the mouse. And an other one directly from Sony containing the MegaDisplay.




\fullimage{next/NeXTcube_motherboard.png}
\par
Opening the machine revealed the minutia and attention to details NeXT had adopted as its standard. The NextCube motherboard displayed above demonstrate that aesthetic was no scarified to performances.\\
\par
SPECS HERE
\pagebreak

\vspace{50 mm}
\rawdrawing{NeXTCube_motherboard}
\par
Details of motherboard components HERE. 
\circled{1},
\circled{2},
\circled{3},
\circled{4},
\circled{5},
\circled{6},
\circled{7},
\circled{8},
\circled{9},
\circled{A},
\circled{B},
\circled{C},
\circled{D},
\circled{E},




\begin{figure}[H]
\centering
\scaledimage{1}{68030_blueprint.png}
\end{figure}
\pagebreak
\par


\begin{figure}[H]
\centering
\scaledimage{1}{68030_layout.png}
\end{figure}
\pagebreak
 


\begin{wrapfigure}[9]{r}{0.33\textwidth}
\centering
\scaledimage{0.33}{next/next-cube-system.png}
\end{wrapfigure}


Contrary to PCs which were a mess of wires, the NeXT computers formed a chain. The mouse was connected to the keyboard, itself connected to the screen, connected to the Cube.\\


\par


If initially the NeXTComputer was acclaimed for its specs, there was a serious issue with the price. Market studies showed that students and researchers wanted a workstation priced at \$3,000. The NeXT Computer started at more than twice the ideal price at \$6,500. To make it worse, the optical drive which powered the bare configuration would turn out to be great for backup but way too slow for runtime. This made the "optional" \$3,500 SCSI hard-drive and absolute necessity which pushed the final price tag to \$10,000!\\
\par




\section{Line of Products}
With a factory tailed made to produce XXX units per week but week nearing XXX/month, NeXT upgraded its product line.\\
\par
In 1991 NeXT released four new products an upgraded NextComputer called NextCube. A smaller, flattened version of the NeXTCube which did not offer any expansion slots but with built-in color capability called NeXTStation. To offer color and video capture, the NeXTDimension expansion board.\\
\par
\newcolumntype{L}[1]{>{\hsize=#1\hsize\raggedright\arraybackslash}X}%
\newcolumntype{R}[1]{>{\hsize=#1\hsize\raggedleft\arraybackslash}X}%
 \begin{figure}[H]
\centering  
\begin{tabularx}{\textwidth}{ L{1.7}  R{0.3}  R{1.4}  R{0.8}  R{0.8}}
  \toprule
  \textbf{Name} &  \textbf{Year} & \textbf{Specs} & \textbf{\$\$\$} & \textbf{\$(2018)}   \\
  \toprule 
   NeXT Computer           & 1989 & 68030 25 Mhz & \$6,500 & \$12,938 \\
\toprule 
   NeXTStation             & 1991 & 68040 25 Mhz & \$4,995 & \$9,157 \\
   NeXTCube                & 1991 & 68040 25 Mhz & \$12 395 & \$21,171 \\
   NeXTDimension           & 1991 & i860  33 Mhz & \$3,995 & \$7,552 \\
   NeXTStation Color       & 1991 & 68040 25 Mhz & \$7,995 & \$14,656 \\
\toprule 
   NeXTCube Turbo          & 1992 & 68040 33 Mhz & \$10,000 & \$18,121 \\
   NextStation Turbo       & 1992 & 68040 33 Mhz & \$5995 & \$11,932 \\
   
   NeXTStation Turbo Color & 1992 & 68040 33 Mhz & \$8995 & \$17,904 \\
   \toprule
\end{tabularx}
\caption{Next products over the years\protect\footnotemark.}
\end{figure}
\par
\footnotetext{Source: kevra.org (Competing Hardware Comparisons), https://simson.net/ref/NeXT/specifications.htm, and "The Second Coming of Steve Jobs".}
\par
In 1992, they buffed up their entire line with Turbo version and what would become the Gold Standard at id Software: The NeXTStation Color Turbo.









\section{NeXTCube}

\begin{minipage}{\textwidth}
\scaledimage{0.5}{next/next-crt-top.png} \scaledimage{0.5}{next/next-cube-top.png}
\end{minipage}
\pagebreak







\section{NeXTStation}
Since cost was the main issue with their product line, NeXT attempted to introduce a new product that would drive down prices significantly. They designed something close to the NeXTCube but with a trade off removing non essential elements in order to produce a cheaper, all-in-one machine.\\
\par
 The design removed the three NeXTBUS extension slots which dramatically reduced the dimension of the central unit. A 2.88MiB floppy disk was added on the right side. The CD-ROM drive was axed. Since there was no room for a NeXTDimension, the VRAM was increased to provide built-in 4,096 colors display from a palette of 16 million colors. Surprisingly the designers managed to pack as much computing power as in the more imposing NextCube.\\
\par 
\cfullimage{cube_vs_slab.png}{A NextStation ad from 1991 NeXT promotional brochure.}
\par
No longer a perfect cube, the case nicknamed "The slab" and (unofficially) the "pizza box", was nonetheless well received by customers and quickly became the most successful computer NeXT produced.\\
\par
The system also introduced usage of the Apple Desktop Bus created by Steve Wozniak where input devices such as mouse and keyboard are connected as a daisy chain\footnote{ADB - The Untold Story: Space Aliens Ate My Mouse}.\\

\par
\fullimage{next/nextstation.png}
\par
SPECS
\pagebreak









\section{NeXTDimension}
The initial graphic capability of the Next cubes were mediocre. The XXXKiB of VRAM only allowed four shades of gray. The NeXTDimension was to take the workstation to a whole new level. Shipping with XX MiB of VRAM, it allowed multiple display, 24-bit color per pixel, realtime recording of video, realtime playback of video. Because it was based a NeXTBus extension card, an user could buy three of them and drive four screens.\\
\par
To demonstrate its capabilities on the invitation-only presentation day event, Steve Jobs picked a scene from Alice in Wonderland film and had it played in realtime on the computer. The audience was impressed that a movie would be played on a computer. At first the movie frames were black and white but as Alice progressed through Wonderland they became more colorful. The audience went berserk.\\
\par
The card was packed with video and graphic processing hardware. At some point it even was supposed to feature realtime video compression. Problems due to manufacturer prevented it.\\
\par
\fq{NeXT has eliminated the C-Cube Microsystems CL-550 JPEG chip from NeXTdimension. This is because our supplier, C-Cube Microsystems, has failed to deliver chips that meet their specifications.}{Felipe\_Fuster\at NeXT.COM}\\
\par
To categorize the NeXTDimension as an extension card is actually innacurate. It was really a computer within the computer with its own operating system, RAM, and VRAM which communicated with NeXTStep via Mach messages.\\
\par
\fq{The NeXTdimension ran a custom kernel which was designed to do soft realtime management of multiple threads within a single address space, provide demand paged virtual memory, and provide a source-compatible Mach API subset and full Mach messaging interface, along with a minimal UNIX system call API, just enough to implement the RenderMan back end and the PostScript device layer. The kernel was called "Graphics aCcelerator Kernel, or "GaCK". Yes, this was a jape at the funny capitalization of the company name. It was not Mach, or BSD, or Minix, or Linux.}{M Paquette}
\par
\par
The card was a powerhouse which came with no driver, no SDK, and documentation. \cw{NeXTTV.app} allowed video editing and frame capture.\\
\par
\fullimage{NeXTtv.png}
\par
Because of Steve Jobs's "hobby" venture with Pixar, the NeXTDimension had close tie with RenderMan. It had a builtin hardware acceleration module called Quick RenderMan.\\
\par
% Renderman uses a similar architecture. The 3DKit and RI C binding reside on the m68k (otherwise you couldn't link with them). 
\fq{
Depending on the setup of the Renderman context, a RIB stream can be spooled to Photorealistic Renderman running on the host CPU (the m68K for black hardware), or to a Quick Renderman implementation loaded on demand into the Window Server. The Quick Renderman implementation in the Window Server may then, if the target window is on a NeXTdimension, forward the rendering operations to a Quick Renderman context running on the NeXTdimension board.}{M Paquette} 
\par

\cfullimage{next/NextDimension_board.png}{NeXTDimension board}
\par
Like the NextCube motherboard, the NeXTDimension hardware was gorgeous. The most proponent component is of course the Intel 840. It had failed to beat the Intel 486 on the market but its eagerness to work on \doom allowed it to make its way here.\\
\par
\drawing{NeXTDimension_motherboard}{}
\par
Details of motherboard components HERE. 
\circled{1},
\circled{2},
\circled{3},
\circled{4},
\circled{5},
\circled{6},
\circled{7},
\circled{8},
\circled{9},
\circled{A},
\cfullimage{next/NeXTDimension.png}{An early NeXTDimension ad from NeXT 1991 brochure. Noice the C-Cube Microsystems JPeg chip which had to be cut from the final design.}
\pagebreak


To select the i860 as the main chip was a careful decision. It had the potential to be so powerful that some people like John Bayko nicknamed it "Cray on a Chip".\\
\par
\fq{
The Intel 80860 was an impressive chip, able at top speed to perform close to 66 MFLOPS at 33 MHz in real applications, compared to a more typical 5 or 10 MFLOPS for other CPUs of the time. Much of this was marketing hype, and it never become popular, lagging behind most newer CPUs and Digital Signal Processors in performance.
The 860 has several modes, from regular scaler mode to a superscalar mode that executes two instructions per cycle and a user visible pipeline mode (instructions using the result register of a multi-cycle op would take the current value instead of stalling and waiting for the result). It can use the 8K data cache in a limited way as a small vector register (like those in supercomputers). The unusual cache uses virtual addresses, instead of physical, so the cache has to be flushed any time the page tables changes, even if the data is unchanged. Instruction and data buses are separate, with 4 G of memory, using segments. It also includes a Memory Management Unit for virtual storage.\\
\par
The 860 has thirty two 32 bit registers and thirty two 32 bit (or sixteen 64 bit) floating point registers. It was one of the first microprocessors to contains not only an FPU as well as an integer ALU, and also included a 3-D graphics unit (attached to the FPU) that supports lines drawing, Gouraud shading, Z-buffering for hidden line removal, and operations in conjunction with the FPU. It was also the first able to do an integer operation, and a (unique at the time) multiply and add floating point instruction, for the equivalent of three instructions, at the same time.\\
\par
However actually getting the chip at top speed usually requires using assembly language - using standard compilers gives it a speed closer to other processors. Because of this, it was used as a coprocessor, either for graphics, or floating point acceleration, like add in parallel units for workstations. Another problem with using the Intel 860 as a general purpose CPU is the difficulty handling interrupts. It is extensively pipelined, having as many as four pipes operating at once, and when an interrupt occurs, the pipes can spill and lose data unless complex code is used to clean up. Delays range from 62 cycles (best case) to 50 microseconds (almost 2000 cycles).}{John Bayko, University of Regina}
\pagebreak
















\section{NeXTStep}
  NeXT's 1990 24-pages brochure "Welcome to the NeXT decade" introducing NeXT Computer System, laid out the seven pillars of the  system they were about to build.\\
\par
\rawfq{
 Our collaboration with Higher Education provided the insight needed to visualize the seven breakthroughs that would ultimately define the NeXT Computer:\\
 \par
\begin{enumerate}
\item A new architecture optimized for total system throughput, not just individual component benchmarks.

\item A pioneering technology for vast and reliable storage, opening the door for new ways to access and use information.

\item Built-in CD-quality sound, allowing sound to be integrated into applications that are used every day.

\item A unified imaging system - Display PostScript - for both the display and the printer. So what you see on the screen is unequivocally what you get on paper.

\item An intuitive interface that gives everyone access to UNIX, with all of its power for networking and multitasking.

\item A multimedia mail system that enables communication combining text, graphics, and voice.

\item A new development environment that dramatically cuts the time it takes to create and customize software.
\end{enumerate}
~
}\\
\par
The first three points were the hardware team responsibility. However the rest was on the software team and the amout of work ahead of them was overwhelming. No operating system was capable of delivering their vision so they would have to build one. To create an OS from scratch would have been an humongous effort. To save time the software team decided to build it on top of BSD. It was a time before Linux kernel emergence. The GNU fundation had no kernel at the time so they selected a micro kernel called Mach from Carnegie Mellon University. \footnote{That is why despite Apple taste for closed environment, they had to publish the source of their Darwin operating system.}
\par
\cfullimage{next/nextstep.png}{NextStep running on an early cube in four color mode.}
\par
To architecture their operating system around Unix provided multi-user and networking out of the box. The major task remaining was to build the GUI.\\
\par
 To achieve the "unified imaging system" they started from the language designed by Adobe for high-end printer, PostScript and modified it to meet the need of a GUI in terms of look and feel, and performances. The result was called Display PostScript\footnote{When OpenStep was used to build Rhapsody at Apple, the display system was changed to Portable Document Format (PDF) imaging model.}
\par
\fq{The Display PostScript system can be broken into two pieces, the PostScript interpreter and the device. The interpreter processes the language, and passes marking, imaging, and compositing directions to the device layer.\\ 
\par
The device layer takes the high level marking, imaging, and compositing operations and (eventually) converts these to bitmap level operations. The Display PostScript system spends the majority of it's time down here. In the case of the NeXTdimension board, the device layer is implemented on the NeXTdimension board. Marking, imaging, and compositing operations are asynchronously transmitted to the NeXTdimension for processing while additional PostScript is interpreted on the 68K processor. A good degree of parallelism is achieved in normal operation. \\}{M Paquette} 
%The NXPing() AppKit call is interpreted by the Display PostScript system as a request to synchronize the NeXTdimension, PostScript interpreter, and app, and will not return until PostScript rendering is complete on the NeXTdimension.
\par
%Running on a color capable machine, the GUI was the most beautiful interface of its time.\\ 
\vspace{4mm}
% \scaledimage{0.95}{nextstep_color.png}
\fullimage{nextstep_color.png}

\section{NeXT at id Software}
To say NeXT computers polarized professionals would be an understatement. It is fair to say that everybody had an opinion about them. Some developers hated it.\\
\par
\fq{Develop for it? I'll piss on it!}{- Bill Gates (for InfoWorld asked if Microsoft would develop for the NeXT).}\\
\par
Some were interested by having access to an Unix system with a powerful GUI.\\
\par
\fq{
When id Software was stationed in Madison, Wisconsin during the winter of 1991, most of us were gone for the Christmas holiday - except John Carmack. John's present, which he bought with \$11,000 of his own money, procured by walking through the snow and ice to remove from the bank, arrived during the holiday and he spent the whole time learning as much as he could about the computer and started working on vector quantization algorithms for compressing graphics. His test graphic was a 256-color screen from King's Quest 5.\\
\par
 After his research was done it was agreed that the entire company needed to develop our next game on NeXTSTEP.}{John Romero, rome.ro, December 20, 2006}\\
\par
Given the timing of its purchase, the NeXT was first used for Wolfestein3D Hint Book. It DTP application \cw{FrameMaker.app} proved perfect for the task. After that, NeXT completely conquered id Software. PCs remained in use mostly for Deluxe Paint...and test the game they wanted to ship.\\
\par
As the needs of the studio evolved with more and more power, id took advantage of NeXTStep ability to run on various platforms from HP and Intel (called the "White hardware").\\
\par
The studio bought so much hardware that twenty five years later, accounts differ on what was the first piece of hardware they bought. For John Romero, it was a NextCube, for John Carmack it was a NeXTStation.\\
\par


\fq{The NeXTCube was purchased in December 1991 and was the only NeXT Computer we had until December 1992 when we decided we would develop DOOM with them so we bought 3 NeXTStations: mine, John Carmack's new one, Tom Hall's. John C's original NeXTCube was the computer used to scan the clay models, gun toys, and latex models.}{John Romero}
\par
\vspace{4mm}
\par
\fq{
I bought our first NeXT (a ColorStation) just out of personal interest. Jason Blochowiak had talked to me about the advantages of Unix based systems from his time at college, and I was interested in seeing what Steve Job's next big thing was. It is funny to look back - I can remember honestly wondering what the advantages of a real multi process development environment would be over the DOS and older Apple environments we were using. Actually using the NeXT was an eye opener, and it was quickly clear to me that it had a lot of tangible advantages for us, so we moved everything but pixel art (which was still done in Deluxe Paint on DOS) over. Using Interface Builder for our game editors was a NeXT unique advantage, but most Unix systems would have provided similar general purpose software development advantages (the debugger wasn't nearly as good as Turbo Debugger 386, though!). Kevin Cloud even did our game manuals, starting with Wolfenstein 3D, in Framemaker on a NeXT.\\
\par
This was all in the context of DOS or Windows 3.x; it was revelatory to have a computer system that didn't crash all the time. By the time Quake 2 came around, Windows NT was in a similar didn't-crash-all-the-time state, it had hardware accelerated OpenGL, and Visual Studio was getting really good, so I didn't feel too bad moving over to it. At that transition point I did evaluate most of the other Unix workstations, and didn't find a strong enough reason not to go with Microsoft for our desktop systems.\\
\par
Over the entire course of Doom and Quake 1's development we probably spent \$100,000 on NeXT computers, which isn't much at all in the larger scheme of development. We later spent more than that on Unix SMP server systems (first a quad Alpha, then an eventually 16-way SGI system) to run the time consuming lighting and visibility calculations for the Quake series. I remember one year looking at the Top 500 supercomputer list and thinking that if we had expanded our SGI to 32 processors, we would have just snuck in at the bottom.}{John Carmack, quora.com}
\par








\par
\fq{
id's first NeXT hardware was all black - both Cubes and Stations. We upgraded through the years to the Turbo model then to other hardware like the HP Gecko and then Intel hardware at the end. We were building fat binaries of the tools for all 3 processors in the office - one .app file that had code for all 3 processors in it and executed the right code depending on which machine you ran it on. All our data was stored on a Novell 3.11 server and we constantly used the NeXTSTEP Novell gateway object to transparently copy our files to and from the server as if it was a local NTFS drive. This was back in 1993!\\
\par
In fact, with the superpower of NeXTSTEP, one of the earliest incarnations of DoomEd had Carmack in his office, me in my office, DoomEd running on both our computers and both of us editing one map together at the same time. I could see John moving entities around on my screen as I drew new walls. Shared memory spaces and distributed objects. Pure magic.\\}{John Romero}
\par
id Software and John Romero in particular liked their production pipeline so much that they successfully advertised it to other studio.\\
\par
\fq{
DOOM, DOOM II and Quake weren't the only games developed on NeXTSTEP. When I got Raven Software to agree to develop Heretic for us I had them buy several Epson NeXT computers (Intel based) and I flew up to Madison, WI to get them all set up and teach them how to develop the game with our tools and engine. It was a great time I'll never forget - seeing their team get excited about the power of the new environment and that they got the game developed and released in under a year. They signed on for another title and developed Hexen on NeXTSTEP as well.}{John Romero, rome.ro, December 20, 2006}\\
\par

\pagebreak









\section{Downfall and Rebirth}
As elegant and powerful as the black hardware was, its high price tag made them a deal breaker. Even the "cheaper" NeXTStation were well beyond most developer budget.\\
\par
 In 1988, the factory was building 400 units/month, well below its maximun 10,000/month capacity. The end of 1989 was even worse with only 360 units sold that year. Production had to be slowed down to 100 unit/month to avoid overlowing storage. In 1990 things improved slightly with 28 million in revenue which were still a far cry of the 2,800 millions SUN generated that same year. 1991 saw an improvement with 20,000 units sold and a revenue of \$127 millions. That figure was still fewer than what apple sold in a single week.\\
\par
By the end of 1992 NeXT as a hardware manufacturer was sealed. Struggling to close deals and hemorrhaging cash (XX millions/year) it fired 300 of its 500 employee in February 1993 in order to become a software only company. NeXTStep was made portable and capable to run on Intel, SPARC, and MIPS CPUs. NeXTSTEP was sold as a combination operating system and object-oriented development environment. NeXTstep for Intel became a popular product among large companies and especially financial institutions for rapidly developing and deploying custom software. NeXT also started to collaborate with SUN to build a lightweight version of NeXTStep called OpenSTEP.\\
\par
Curiously NeXT never capitalized on id Software the success story reportedly due to Steve Jobs disdain for video games\footnote{comp.sys.next.advocacy: "DOOM: NeXTstep's Most Successful App".}.\\
\par
In an Hollywoodian turn of events, Apple Computer bought NeXT in 1996 for \$429 million in cash after its own efforts to upgrade the Macintosh operating system failed.  Steve Jobs returned to the company he had co-founded twenty years earlier. After the sale, Steve Jobs first began working as an advisor but was later appointed acting-CEO, and then finally CEO of the company.\\
\par
OpentSTEP was used as foundation for Apple's Rhapsody project which became Darwin (a.k.a MacOS X). Even if not for the kernel, it is likely some of the code that once ran on NeXTStep and contributed to \doom now runs on the many millions apple and iOS computer across the world.\\



