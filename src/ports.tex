The success of the PC version and its mind numbing sales figure made it an extremely desirable title for any console publisher of the early 90s. From 1994 to 1997, \doom was ported to all six major systems of the era.\\
\par
% \begin{itemize}
%    \item 1994: Atari Jaguar and the Sega 32X.
%    \item 1995: Super Nintendo and Sony Playstation.
%    \item 1996: 3DO.
%    \item 1997: Sega Saturn.
% \end{itemize}
% INSER ARRAY HERE: Console, Year, Authors, Avg framerate, price, CPUS, RAM.
% \bigskip

\begin{figure}[H]
\centering  
\begin{tabularx}{\textwidth}{ L{1}  R{1} R{0.5} R{0.5} R{0.5} R{0.5} }
  \toprule
   \textbf{Year} & \textbf{System} & \textbf{\#CPUs} & \textbf{RAM} & \textbf{Resolution} & \textbf{Price}\\
  \toprule 
  1994 & Atari Jaguar &  & ISA-8  &  4 & BLA\\
  1994 & Sega 32X &               & ISA-8  &  8& BLA\\
  1995 & Super Nintendo &          & ISA-16 & 13& BLA\\
  1995 & Sony Playstation &   & VLB    & 24& BLA\\
  1996 & 3DO &   & VLB    & 24& BLA\\
  1997 & Sega Saturn &   & VLB    & 24& BLA\\
   \toprule
 \end{tabularx}
\caption{Ports of \doom to video game console from 1995 to 1997}
\end{figure}


\par
The architecture of the engine based on a core with "only" sub-system to implement may lead to conclude it was an easy task to get \doom to run on a console. This feeling could not be further from the truth. From design trade-off due to restricted resources, crazy schedules, to anecdote of a lone hero programmer trying to make the everything fit in, all versions have an unique and rich story.\\
\par
From a technical standing point, the common problem to solve was to deal with less memory than originally intended. PCs minimum requirement was to have 4 MiB installed on the machine. It was of course not possible to ask customers to add more RAM to their console. Developers sometimes had to deal little as little as 512 KiB of RAM.\\
\par
The second difficulty was to deal with exotic hardware. The PC was designed around one "big iron" CPU while all consoles were a made of a constellation of CPUs and co-processors.












\section{Jaguar (1994)}
\subfile{port_jaguar} 


















\section{Sega 32X (1994)}

\begin{wrapfigure}[15]{r}{0.25\textwidth}{\centering \scaledimage{0.25}{sega_x32_logo.png}}
\hrule 
\bigskip
   Released Nov, 1994\\
   CPU: 2x SH-2 \\
   32-bit 23 MHz\\
   RAM: 256 KiB\\
   VRAM: 2x128 KiB\\

   From the Genesis:\\
   m68k 7.6 MHz\\
   Zilog Z80 3.58 MHz\\
\hrule 
\end{wrapfigure}


The Sega X32 was an power up booster which you could insert on top of its Genesis via its cartridge slot. Developed in less than a year during 1994, it was rushed in order to buy time against the Atari Jaguar. The task of building it fell on Sega USA\footnote{Retroinspection: SEGA X32, Retro Gamer \#77} (while Sega Japan worked on its next flagship, the SEGA Saturn). Despite unfavorable time constraints they managed to produce an impressive piece of engineering. Nicknamed "Mars", the machine was capable of up to four operations per instructions, something unheard of even on PCs\footnote{The first super scalar on PC would be the Intel Pentium introduced in March 1993.}. The key innovation was its mirrored architecture based on two Hitashi RISC CPUs running at 23 MHz, each with their own framebuffer which could be used either as a master/slave or a pair in order to double the framerate.\\
\par
\fullimage{consoles/32X.png}
\par
\drawing{x32_arch}{Sega X32 architecture.}
\par
John Carmach himself took care of this port. 3D section ran at 128x144 translated 256x244 and floating inside the 320x224 resolution of whole screen.\\
\par
\fq{I spent weeks working with Id Software's John Carmack, who literally camped out at the Sega of America building in Redwood City trying to get Doom ported. That guy worked his ass off and he still had to cut a third of the levels to get it done in time.\\ 
\par
What amazes me now is that with all that going on, nobody at Sega was willing to say "Wait a minute, what are we doing? Why don't we just stop?" Sega should have killed the 32X in the spring of 1994, but we didn't. We stormed the hill, and when we got to the top we realized it was the wrong damn hill. }{Scot Bayless, Senior Producer at Sega of America}
\par
Despite the hardware impressive claims, the machine struggled, likely due to a cache too small resulting in cache misses and stalled CPUS. The game had to be significantly tuned down.\\ Levels had to be cut, from the original 30, only 15 remained. Enemies eight positions had to be reduced to one to always face the player. With the side effect of removing monster infighting. Enemies were removed all together (cyberdemon, spiderdemon or spectre). Worse than all, the active window had to be made smaller. Running in a resolution of 320x224, only a 256 x 144 is actually updated every frames.\\
\par
\cfullimage{consoles/x32_screenshot.png}{}
\par
In the previous screenshot notice how E1M1 blue texture had to be replaced with a brown one to limit cache misses. The number of stairs was also lowered in order to reduce the number of visplanes generated.\\
\par
\trivia{Upon finishing the game, instead of looping back to level one, the player is presented with a DOS prompt (\cw{C:\textbackslash \textbackslash DOOM>}) and the game stop without showing the end! \fixme{WHHAAAT?}}
\par
With all these compromises the framerate managed to remain within the 20 fps which was a pleasant experience.

\pngdrawing{x32_fullarch}{}
Called their console after planets (Jupiter, Mars, Saturn).\\





\section{Super Nintendo (1995)}

\begin{wrapfigure}[14]{r}{0.25\textwidth}{\centering \scaledimage{0.25}{snes_logo.png}}
\hrule 
\bigskip
   Super FX2:
   Released 1993\\
   GSU: 23 MHz\\
   VRAM: 32 KiB\\
   
   SNES:\\
   Released 1990\\
   CPU: 5A22 3.58 MHz\\
   Audio: SPC700\\
\hrule 
\end{wrapfigure}



With its Ricoh 5A22 CPU running at 3.58 MHz accounting for \fixme{} MIPS, the SNES was an unlikely platform to run \doom. The system was proven barely able to run the much less sophisticated title Wolfesntein 3D and its was using a very low resolution at that (\fixme{}). But as usual hackers found a way.\\
\par


Argonaut Games, plc was a British video game developer founded by teenager Jez San in 1982. Although originally focused on the C64 market, they latter leaned toward the NES and then the SNES.\\
\par Around 1993, the gifted hackers managed to impresse Nintendo and landed a contract for a game nicknamed "NesGlider" which would later become the legendary "Starfox". The project was to become a features real-time 3D graphicsAs good as they were, there was only that much they could do with the hardware. What they needed was more raw power.\\
\par
\fq{I told them that this is as good as it's going to get unless they let us design some hardware to make the SNES better at 3D. Amazingly, even though I had never done any hardware before, they said YES, and gave me a million bucks to make it happen.}{Jez San}.\\
\par
Jez's team made good usage of Nintendo's investment. They came up with something originally codenamed Mathematical Argonaut Rotation I/O, or "MARIO". So powerful was the Super FX chip, the joke was that the Super NES was just a box to hold the chip. Since there was no way to modify the console, the chip was soldered on each new games.\\
\par
The GSU\footnote{Graphics Support Unit} as its official name would be had a simple design based on a RISC processor running at 21.4 Mhz. Its sole purpose was to draw polygons to a frame buffer in the RAM sitting next to it where its data would be periodically transfered to the main system RAM via DMA.\\
\par
\cfullimage{consoles/SNES.png}{The Super Famicom by Nintendo.}
\par
\begin{wrapfigure}[11]{r}{0.25\textwidth}
\centering
\scaledimage{0.25}{superfx.png}
\end{wrapfigure}
When Sculptured Software was tasked to port \doom to SNES, its head of development, Randy Linden, immediately decided to use Argonaut's Super DX 2 chip\footnote{The Super FX 2 was almost identical to the Super FX 1 except for a tighter packing allowing more bus address pin resulting in more ROM and more RAM.}. However even with the hundreds of polygons per seconds the chip could render, the original quality of PC \doom was still unattainable.\\
\par
 Randy Linden ended up writing a new renderer which he called "Reality engine". Many sacrifices had to be done to make the game run with the most notable being no textured flat, duplicated horizontal lines, no sound propagation and always front facing enemies.\\
\par Even with all these restriction, the Reality Engine still had to reduce the rendering area. Out of the native 256 x 224 resolution, only 216x176 were actually drawn and only 216x144 for the 3D canvas. With horizontal lines doubles, it means Reality Engine was actually rendering at 108x144 to reach an average of 10 fps which was still a remarkable achievement.\\





\fq{DOOM was a truly ground-breaking title and I wanted to make it possible for gamers without a PC to play the game, too. DOOM on the Super Nintendo was another one of those programming challenges that I knew could be accomplished.\\
\par

I started the project independently and demo'd it to Sculptured Software when I had a fully operational prototype running. A bunch of people at Sculptured helped complete the game so it could be released in time for the holidays.\\
\par
The development was challenging for a few reasons, notably there were no development systems for the SuperFX chip at the time. I wrote a complete set of tools — assembler, linker and debugger — before I could even start on the game itself.\\
\par
The development hardware was a hacked-up StarFox cartridge (because it included the SuperFX chip) and a modified pair of game controllers that were plugged into both SNES ports and connected to the Amiga's parallel port. A serial protocol was used to communicate between the two for downloading code, setting breakpoints, inspecting memory, etc.\\
\par
I wish there could have been more levels but unfortunately the game used the largest capacity ROM available and filled it almost completely. I vaguely recall there were roughly 16 bytes free, so there wasn't any more space available anyway! However, I did manage to include support for the SuperScope, Mouse and XBand modem! … Yes, you could actually play against someone online!}
{Randy Linden (Interview with gamingreinvented.com)}
\par
Almost no censorship from Nintendo except for removing red blood.
\par

\scaledimage{0.3}{doom_red_cartridge.png}

\cfullimage{consoles/snes/wide.png}{}
\par
\cfullimage{consoles/snes/enemy.png}{}


\trivia{From 199X to 199X, 721 games were produced for the Super Nintendo in North America. Some people have built impressive collection. You can always spot if \doom cartridge is these, even from 20 feet. Only three cartridge were ever allowed to not be gray. Two red: \doom and Maximum Carnage while and Killer Instinct was black.}
\par
\drawing{snes_cartridge}{SNES 721 games library. Zelda stands apart. Because Zelda stands apart.}
\par
\rawdrawing{snes_cartridge2}
resolution = 256 x 224 but inside black frame.

\fullimage{snes_cartridge.png}
\rawdrawing{snes_board}







\section{Playstation 1 (1995)}

\begin{wrapfigure}[14]{r}{0.25\textwidth}{\centering \scaledimage{0.25}{psx_logo.png}}
\hrule 
   Released Dec 1994\\
   MIPS R3000 33 MHz\\
   GTE Copro, 33 MHz\\
   RAM: 2 MiB\\
   VRAM: 1 MiB\\
   Audio: Sony SPU
\hrule 
\end{wrapfigure}

The screen resolution was changed from 320x200 to 256x240, which is stretched to roughly 293x240 via NTSC rasterization.\\
modified version of the Doom engine used in the Atari Jaguar port. This version spent six months in development. The Arch-vile monster from Doom II is not present; according to one of the game's designers, Harry Teasley, this was because he had twice as many frames as any other monster, and the team felt that they "just couldn't do him justice" on the PlayStation. A new monster however was added: Nightmare spectre (subtractively blended against the background graphics).\\
\par
 These include sector-based coloured lighting, an animated, flame-filled sky, and a new animation for the player's mug shot, which shows the Doomguy's head exploding if the player character is gibbed. translucent Spectres are drawn without the cascade effect \\
\par
r Next Generation said the PlayStation version succeeded in "putting previous efforts for 32X, Jaguar, and especially Super NES, to shame" 
\par
Harry Teasley: http://5years.doomworld.com/interviews/harryteasley/\\
\par
\fullimage{consoles/PSX.png}
How PSX renders doom: https://www.youtube.com/watch?time\_continue=58\&v=MS9MGSm4gng\\
\par
\fullimage{Sony-PlayStation-SCPH-1000-Motherboard}
\pagebreak
\rawdrawing{psx_motherboard}
\par
Source: NEXT Generation Issue \#6 June 1995, "Inside the Playstation".\\
\par
\circled{1}, R3000 CPU (30 Mips) also containing the 88 Mips Geometry Transfer Engine (GTE), the DMA Controller and Sony's 80 Mips MDEC video decompression hardware.
\circled{2} Operating System ROM.
\circled{3} GPU.
\circled{4} 2 MiB RAM.
\circled{5} 1 MiB VRAM.
\circled{6} DSP.
\circled{7} 512 KiB DSP RAM.
\circled{8} CD Controoler: Contains a CD ROM-XA converter (allowing up to eight simultaneous streams of mixed audio and CD data) and a small amount of buffer RAM.
\circled{9} CD-dribe DSP.
\circled{A} 16-bit video digital converted.
\circled{B} Video decoder and encoder (NTSC or PAL) to TV.









\section{3DO (1996)}
\begin{wrapfigure}[22]{r}{0.25\textwidth}{\centering \scaledimage{0.25}{3do_logo.png}}
\hrule 
   Released Dec 1993\\
   CPU: ARM60 12.5 MHz\\
   RAM: 2 MB\\
   VRAM:1 MB\\
\hrule 
\end{wrapfigure}

BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB\\ 
\par
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB \\
\par
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB BLAB 
Lots of good stuff here: https://github.com/Olde-Skuul/doom3do\\
\par
\fullimage{consoles/3DO.png}
\par
\fq{this was the product of ten intense weeks of work due to the fact that I was misled about the state of the port when I was offered the project. I was told that there was a version in existance with new levels, weapons and features and it only needed "polishing" and optimization to hit the market. After numerous requests for this version, I found out that there was no such thing and that Art Data Interactive was under the false impression that all anyone needed to do to port a game from one platform to another was just to compile the code and adding weapons was as simple as dropping in the art.\\
\par
Uh... No...\\
\par
My friends at 3DO were begging for DOOM to be on their platform and with christmas 1995 coming soon (I took this job in August of 1995, with a mid October golden master date), I literally lived in my office, only taking breaks to take a nap and got this port completed.\\
\par
Shortcuts made...\\
\par
I had no time to port the music driver, so I had a band that Art Data hired to redo the music so all I needed to do is call a streaming audio function to play the music. This turned out to be an excellent call because while the graphics were lackluster, the music got rave reviews.\\
\par
3DO's operating system was designed around running an app and purging, there was numerous bugs caused by memory leaks. So when I wanted to load the Logicware and id software logos on startup, the 3DO leaked the memory so to solve that, I created two apps, one to draw the 3do logo and the other to show the logicware logo. After they executed, they were purged from memory and the main game could run without loss of memory.\\
\par
There was a Electronic Arts logo movie in the data, because there was a time that EA was going to be distributing the game, however the deal fell through.\\
\par
The vertical walls were drawn with strips using the cell engine. However, the cell engine can't handle 3D perspective so the floors and ceilings were drawn with software rendering. I simply ran out of time to translate the code to use the cell engine because the implementation I had caused texture tearing.\\
\par
I had to write my own string.h ANSI C library because the one 3DO supplied with their compiler had bugs! string.h??? How can you screw that up!?!?! They did! I spent a day writing all of the functions I needed in ARM 6 assembly.}{Rebecca Ann Heineman}





\section{Saturn (1997)}
\begin{wrapfigure}[12]{r}{0.25\textwidth}{\centering \scaledimage{0.25}{saturn_logo.png}}
\hrule 
\bigskip
   Released 19XX\\
   CPU: 
   RAM:\\
   VRAM:\\
   Audio: SPC700\\
\hrule 
\end{wrapfigure}

https://www.doomworld.com/forum/topic/86671-dissecting-sega-saturn-doom/\\
\par
JIMSDOOM.WAD, obviously named after Jim Bagley.\\
The wad is a 1:1 copy of PSXDOOM.WAD\\
John Carmack shut down their original plan to use a hardware-accelerated renderer\\
\par
See author comments: https://www.doomworld.com/forum/topic/86671-dissecting-sega-saturn-doom/?page=2\#comment-1580057\\
\par
\fq{I hated affine texture swim and integral quad verts, but in hindsight, I probably should have let experiment.}{John Carmack}
\fullimage{consoles/Saturn.png}\\
\fullimage{affine_texture_mapping/post_far.png}\\
\fullimage{affine_texture_mapping/post_near.png}\\
\par
\fullimage{affine_texture_mapping/door.png}\\
\par
\fullimage{affine_texture_mapping/hallway.png}\\
\par
\begin{minipage}{\textwidth}
\scaledimage{0.4}{affine_texture_mapping/tex_perp_pc_repeat_nearest_replace.png}
\scaledimage{0.4}{affine_texture_mapping/tex_perp_no_pc_repeat_nearest_replace.png}\\
\par

\scaledimage{0.4}{affine_texture_mapping/tex_pc_repeat_nearest_replace.png}
\scaledimage{0.4}{affine_texture_mapping/tex_no_pc_repeat_nearest_replace.png}\\
\par

\scaledimage{0.4}{affine_texture_mapping/tex_pc_repeat_nearest_replace_sharp.png}
\scaledimage{0.4}{affine_texture_mapping/tex_no_pc_repeat_nearest_replace.png}\\
\par
\end{minipage}
\par
Explanation:\\
\par
\fullimage{affine_texture_mapping/affine2.png}
There are solutions to this:\\
\par
\fullimage{affine_texture_mapping/subdivision_sample.png}

\par 
\fixme{Watch https://www.youtube.com/watch?v=784MUbDoLjQ before closing this chapter.}
\par
See: http://itrunsdoom.tumblr.com/archive\\
\par



